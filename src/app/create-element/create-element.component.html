<!DOCTYPE html>

<div [hidden]="userIsAnonymous || userEmailEmpty || elementCreated">
  <!-- Page for picking images -->
  <div [hidden]="showElements">
    <td>
      <input type="radio" [(ngModel)]="elementType" (ngModelChange)="updateFaceNumber(1)" value="standard"/> Standard
      <input type="radio" [(ngModel)]="elementType" (ngModelChange)="updateFaceNumber(2)" value="toggable"/> Toggable
      <input type="radio" [(ngModel)]="elementType" (ngModelChange)="updateFaceNumber(6)" value="dice"/> Dice
      <input type="radio" [(ngModel)]="elementType" (ngModelChange)="updateFaceNumber(2)" value="card"/> Card
      <input type="radio" [(ngModel)]="elementType" (ngModelChange)="updateFaceNumber(1)" value="cardsDeck"/> Cards deck
      <input type="radio" [(ngModel)]="elementType" (ngModelChange)="updateFaceNumber(1)" value="piecesDeck"/> Pieces deck
    </td>

    <div *ngFor="let selectedImage of selectedImages; let i = index">
      <p> image {{i+1}}: {{selectedImage.name}} (dimension: {{selectedImage.height}} x {{selectedImage.width}})</p>
    </div>

    <div>
      <input id="draggableButton" type="checkbox" [(ngModel)]="isDraggable"/>
      <label for="draggableButton">Draggable</label>

      <div *ngIf="elementType=='standard' || elementType=='card'">
        <input id="drawableButton" type="checkbox" [(ngModel)]="isDrawable"/>
        <label for="drawableButton">Drawable</label>
      </div>

      <div *ngIf="elementType=='standard'">
        <input id="degreesButton" type="number" [(ngModel)]="rotatableDegrees" min="1" max="360"/>
        <label for="degreesButton">Rotatable Degrees</label>
      </div>
    </div>

    <div [hidden]="!hideNextButton">
      <div *ngIf="faceNumber != 1"> Warning: Please select {{faceNumber}} images with same dimensions. </div>
      <div *ngIf="faceNumber == 1"> Warning: Please select 1 image. </div>
      <button inactive>Submit</button>
    </div>
    <div [hidden]="hideNextButton">
      <button (click)="next()">Submit</button>
    </div>

    <div *ngFor="let image of images | async">
      <p> {{image?.name}} </p>
      <a (click)="selectImage(image)"> <img [src]="image?.downloadURL" width="120px"></a>
    </div>
  </div>

  <!-- Page for picking cards -->
  <div [hidden]="!showElements">

    <p> You have selected {{selectedElements.length}} cards.</p>

    <div [hidden]="!hideSubmitButton">
      Warning: Please select at least 2 cards.
      <button inactive>Submit</button>
    </div>
    <div [hidden]="hideSubmitButton">
      <button (click)="submit()">Submit</button>
    </div>

    <div *ngFor="let element of elements | async as asdf; let i = index">
      <input type="checkbox" (click)="selectElement(element)"/>
      <div *ngFor="let image of images | async">
        <div *ngIf="(element.images)[0]['imageId'] == image?.$key">
          <img [src]="image?.downloadURL" width="120px">
        </div>
        <div *ngIf="(element.images)[1]['imageId'] == image?.$key">
          <img [src]="image?.downloadURL" width="120px">
        </div>
      </div>
    </div>
  </div>
</div>


<div [hidden]="userEmailEmpty || userIsAnonymous || !elementCreated" style="text-align: center">
  <h2>
    Element created.
  </h2>
  <button (click)="reset()">Reset</button>
</div>


<div [hidden]="!userIsAnonymous" style="text-align:center">
  Please login with Google, phone, or email to use this function.
</div>

<div [hidden]="!userEmailEmpty || userIsAnonymous" style="text-align:center">
  E-mail required to proceed. Please add your E-mail in "Profile Settings" to use this function.
</div>
